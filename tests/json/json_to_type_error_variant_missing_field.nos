# expect: caught: Unknown constructor: Unknown
# Test jsonToType throws exception for unknown variant constructor
use stdlib.json.{jsonParse}

type Status = Success(Int) | Failure(String)

main() = {
    # Invalid: Unknown is not a valid constructor for Status
    json = jsonParse("{\"Unknown\": 42}")
    try {
        r = jsonToType[Status](json)
        "success"
    } catch { e -> "caught: " ++ e }
}

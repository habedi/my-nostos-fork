# expect: something went wrong
# Test jsonToType with error variant
use stdlib.json.{jsonParse, jsonStringify}
type Status = Success(Int) | Failure(String)

getMessage(Success(_)) = "no error"
getMessage(Failure(msg)) = msg

main() = {
    json = jsonParse("{\"Failure\": \"something went wrong\"}")
    r = jsonToType[Status](json)
    getMessage(r)
}

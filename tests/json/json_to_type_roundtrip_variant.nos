# expect: true
# Test round-trip: variant -> json -> variant
use stdlib.json.{jsonParse, jsonStringify}
type Status = Success(Int) | Failure(String)

getValue(Success(n)) = n
getValue(Failure(_)) = -1

main() = {
    json = jsonParse("{\"Success\": 42}")
    r = jsonToType[Status](json)
    json2 = reflect(r)
    r2 = jsonToType[Status](json2)
    getValue(r) == getValue(r2)
}

# expect: 0
# Sieve of Eratosthenes for prime numbers

# Generate range [start, stop)
myRange(start, stop) = if start >= stop then [] else [start | myRange(start + 1, stop)]

# Filter list
myFilter(_, []) = []
myFilter(p, [h | t]) = if p(h) then [h | myFilter(p, t)] else myFilter(p, t)

# Sieve: remove multiples of n
sieve([]) = []
sieve([p | rest]) = [p | sieve(myFilter(x => x % p != 0, rest))]

# Get primes up to n
primes(n) = sieve(myRange(2, n + 1))

main() = {
    assert_eq([2, 3, 5, 7, 11, 13, 17, 19], primes(20))
    0
}

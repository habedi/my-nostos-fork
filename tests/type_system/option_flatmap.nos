# expect: 5
# Option flatMap with typed result

type MyOption[T] = MySome(T) | MyNone

myFlatMap(f, opt) = match opt {
    MySome(x) -> f(x)
    MyNone -> MyNone
}

safeDiv(a, b) = if b == 0 then MyNone else MySome(a / b)

myUnwrap(opt) = match opt {
    MySome(x) -> x
    MyNone -> 0
}

main() = {
    maybe: MyOption[Int] = MySome(10)
    result: MyOption[Int] = myFlatMap(x => safeDiv(x, 2), maybe)
    myUnwrap(result)
}

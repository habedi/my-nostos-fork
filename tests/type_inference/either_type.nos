# expect: 42
# Either-like type with inference

type Either[L, R] = Left(L) | Right(R)

eitherMap[L, R, S](e: Either[L, R], f: R -> S) -> Either[L, S] = match e {
    Left(l) -> Left(l)
    Right(r) -> Right(f(r))
}

main() = {
    value: Either[String, Int] = Right(21)
    result = eitherMap(value, x => x * 2)
    match result {
        Left(_) -> 0
        Right(n) -> n
    }
}

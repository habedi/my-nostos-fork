# expect: 24
# Chain Result operations with type inference

type Res[E, T] = ResOk(T) | ResErr(E)

resMap[E, A, B](r: Res[E, A], f: A -> B) -> Res[E, B] = match r {
    ResOk(x) -> ResOk(f(x))
    ResErr(e) -> ResErr(e)
}

resUnwrap[E, T](r: Res[E, T], default: T) -> T = match r {
    ResOk(x) -> x
    ResErr(_) -> default
}

main() = {
    r: Res[String, Int] = ResOk(6)
    mapped = resMap(r, x => x * 4)
    resUnwrap(mapped, 0)
}

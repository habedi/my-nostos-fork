# expect: 42
# Test nested Option type inference

type MyOption[T] = MySome(T) | MyNone

myUnwrapOr[T](opt: MyOption[T], default: T) -> T =
    match opt {
        MySome(x) -> x
        MyNone -> default
    }

main() = {
    outer: MyOption[MyOption[Int]] = MySome(MySome(42))
    inner = match outer {
        MySome(x) -> x
        MyNone -> MyNone
    }
    myUnwrapOr(inner, 0)
}
